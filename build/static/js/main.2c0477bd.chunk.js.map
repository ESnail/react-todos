{"version":3,"sources":["logo.svg","pages/TodosHook/Todos.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Todos","initList","id","title","list","con","status","lists","window","localStorage","getItem","JSON","parse","_useState","useState","_useState2","Object","slicedToArray","setList","_useState3","length","_useState4","active","setActive","_useState5","_useState6","isEditTitle","setIsEditTitle","_useState7","_useState8","menuOp","setMenuOp","menuRef","useRef","activeItem","find","item","useEffect","current","children","classList","add","setItem","stringify","react_default","a","createElement","className","onClick","reverse","concat","toConsumableArray","event","target","dataset","ref","map","join","key","data-id","data-todos","filter","obj","index","forEach","i","splice","setTimeout","type","value","placeholder","onChange","trim","onKeyUp","keyCode","val","alert","push","listItem","changeStatus","delItem","Index","src","logo","alt","href","rel","react_router_dom","to","App","react_router","path","exact","component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2c0477bd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React, { useState, useEffect, useRef } from 'react'\r\nimport './Todos.css'\r\n\r\nfunction Todos () {\r\n  let initList = [ { id: 1, title: '工作', list: [ { id: 1, con: '静态页面开发', status: 'todo' } ] } ]\r\n  // 重新初始化，设置数据\r\n  let lists = window.localStorage.getItem('todos-hook-list')\r\n  lists = lists ? JSON.parse(lists) : initList\r\n  initList = lists\r\n  const [ list, setList ] = useState(initList)\r\n  const [ active, setActive ] = useState(list.length)\r\n  const [ isEditTitle, setIsEditTitle ] = useState(false)\r\n\r\n  const [ menuOp, setMenuOp ] = useState(null)\r\n\r\n  const menuRef = useRef(null)\r\n\r\n  const newMenu = () => {\r\n    list.reverse()\r\n    const id = list.length + 1\r\n    setList([ ...list, { id, title: '代办事项', list: [] } ].reverse())\r\n    setActive(id)\r\n    setMenuOp('new')\r\n  }\r\n\r\n  const menuClick = (event) => {\r\n    setActive(+event.target.dataset.id)\r\n  }\r\n\r\n  const activeItem = () => {\r\n    return list.find(item => item.id === active)\r\n  }\r\n\r\n  const titleChange = (event) => {\r\n    activeItem().title = event.target.value.trim()\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const submitTitle = (event) => {\r\n    if (event.keyCode === 13) {\r\n      const val = event.target.value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      setIsEditTitle(false)\r\n      activeItem().title = val\r\n      setList([ ...list ])\r\n    }\r\n  }\r\n\r\n  const delAll = () => {\r\n    let index\r\n    list.forEach((item, i) => {\r\n      if (item.id === activeItem().id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && list.splice(index, 1)\r\n\r\n    // 先完成动画，再渲染dom\r\n    menuRef.current.children[ 0 ].classList.add('leave')\r\n    window.setTimeout(() => {\r\n      setList([ ...list ])\r\n      setActive(list.length)\r\n    }, 400);\r\n  }\r\n\r\n  const submitItem = (event) => {\r\n    if (event.keyCode === 13) {\r\n      const val = event.target.value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      activeItem().list.reverse()\r\n      activeItem().list.push({ id: activeItem().list.length + 1, con: val, status: 'todo' })\r\n      activeItem().list.reverse()\r\n      setList([ ...list ])\r\n      event.target.value = ''\r\n    }\r\n  }\r\n\r\n  const changeStatus = (item) => {\r\n    const listItem = activeItem().list.find(obj => obj.id === item.id)\r\n    listItem.status = listItem.status === 'todo' ? 'done' : 'todo'\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const delItem = (item) => {\r\n    let index\r\n    activeItem().list.forEach((obj, i) => {\r\n      if (obj.id === item.id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && activeItem().list.splice(index, 1)\r\n    setList([ ...list ])\r\n  }\r\n\r\n  // 动画\r\n  useEffect(() => {\r\n    // 新增执行动画\r\n    if (menuOp === 'new') {\r\n      menuRef.current.children[ 0 ].classList.add('enter')\r\n    }\r\n    // 下次动画有效\r\n    return () => {\r\n      setMenuOp(null)\r\n    }\r\n  }, [ menuOp ])\r\n\r\n  // 缓存数据\r\n  useEffect(() => {\r\n    return () => {\r\n      window.localStorage.setItem('todos-hook-list', JSON.stringify(list))\r\n    }\r\n  }, [ list ])\r\n\r\n  return (\r\n      <div className=\"container\">\r\n          <aside className=\"menu\">\r\n              <p className=\"list-new\" onClick={ newMenu }>⊹ 新增</p>\r\n              <ul onClick={ menuClick } ref={ menuRef }>\r\n                  {list.map(item => (\r\n                      <li className={ [ 'ell', (item.id === active) ? 'active' : '' ].join(' ') } key={ item.id } data-id={ item.id } data-todos={ item.list.filter(obj => obj.status === 'todo').length }>{item.id}. {item.title}</li>\r\n          ))}\r\n              </ul>\r\n          </aside>\r\n          <section className=\"main\">\r\n              {activeItem() ? (\r\n                  <div className=\"header\">\r\n                      <div className={ [ 'title', isEditTitle ? 'non' : '' ].join(' ') }>\r\n                          <h3 onClick={ () => {setIsEditTitle(true)} }>\r\n                              <span>✎</span>\r\n                              <span className=\"ell\" data-todos={ activeItem().list.filter(obj => obj.status === 'todo').length }>{activeItem() && `${ activeItem().id }. ${ activeItem().title }`}</span>\r\n                          </h3>\r\n                          <span className=\"del-all\" onClick={ delAll }>ㄨ</span>\r\n                      </div>\r\n                      <div className={ [ 'title', isEditTitle ? '' : 'non' ].join(' ') }>\r\n                          <input type=\"text\" value={ activeItem() && activeItem().title } placeholder=\"请输入，回车确认\" onChange={ titleChange } onKeyUp={ submitTitle }/>\r\n                      </div>\r\n                      <p><span className=\"item-new\">✙</span><input type=\"text\" placeholder=\"请输入，回车确认\" onKeyUp={ submitItem } /></p>\r\n                  </div>\r\n        ): null}\r\n              <ul>\r\n                  {activeItem() && activeItem().list.map(((item) => (\r\n                      <li key={ item.id } className={ item.status }>\r\n                          <span onClick={ () => changeStatus(item) } className=\"op\">{item.status === 'todo' ? '☐' : '✓'}</span>\r\n                          <span className='con'>{item.id}. {item.con}</span>\r\n                          <span onClick={ () => delItem(item) } className=\"del-item\">ㄨ</span>\r\n                      </li>\r\n          )))}\r\n              </ul>\r\n          </section>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Todos","import React from 'react';\nimport { HashRouter as Router, Route, Link } from 'react-router-dom'\nimport Todos from './pages/TodosHook/Todos.js'\n\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction Index () {\n  return (\n      <div className=\"App\">\n          <header className=\"App-header\">\n              <img src={ logo } className=\"App-logo\" alt=\"logo\" />\n              <p>\n            Edit <code>src/App.js</code> and save to reload.\n              </p>\n              <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n              </a>\n\n              <Link className=\"App-link\" to=\"/todos-hook\">todos-hook</Link>\n          </header>\n      </div>\n    )\n}\n\nfunction App() {\n  return (\n      // <Router>\n      //     <Route path=\"/\" exact component={ Index } />\n      //     <Route path=\"/todos-hook\" component={ Todos } />\n      // </Router>\n      <Router>\n          <Route path=\"/\" exact component={ Index } />\n          <Route path=\"/todos-hook\" component={ Todos } />\n      </Router>\n      \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// import './index.css';\n// import App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}
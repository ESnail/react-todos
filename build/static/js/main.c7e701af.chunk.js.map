{"version":3,"sources":["logo.svg","pages/TodosHook/Todos.js","pages/TsTodosHook/Todos.tsx","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Todos","initList","id","title","list","con","status","lists","window","localStorage","getItem","JSON","parse","_useState","useState","_useState2","Object","slicedToArray","setList","_useState3","length","_useState4","active","setActive","_useState5","_useState6","isEditTitle","setIsEditTitle","_useState7","_useState8","menuOp","setMenuOp","menuRef","useRef","activeItem","find","item","useEffect","current","children","classList","add","setItem","stringify","react_default","a","createElement","className","onClick","reverse","concat","toConsumableArray","event","target","dataset","ref","map","join","key","data-id","data-todos","filter","obj","index","forEach","i","splice","setTimeout","type","value","placeholder","onChange","trim","onKeyUp","keyCode","val","alert","push","listItem","changeStatus","delItem","React","TsTodosHook_Todos","react","Index","src","logo","alt","href","rel","react_router_dom","to","App","react_router","path","exact","component","TsTodos","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c7e701af.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import React, { useState, useEffect, useRef } from 'react'\r\nimport './Todos.css'\r\n\r\nfunction Todos () {\r\n  let initList = [ { id: 1, title: '工作', list: [ { id: 1, con: '静态页面开发', status: 'todo' } ] } ]\r\n  // 重新初始化，设置数据\r\n  let lists = window.localStorage.getItem('todos-hook-list')\r\n  lists = lists ? JSON.parse(lists) : initList\r\n  initList = lists\r\n  const [ list, setList ] = useState(initList)\r\n  const [ active, setActive ] = useState(list.length)\r\n  const [ isEditTitle, setIsEditTitle ] = useState(false)\r\n\r\n  const [ menuOp, setMenuOp ] = useState(null)\r\n\r\n  const menuRef = useRef(null)\r\n\r\n  const newMenu = () => {\r\n    list.reverse()\r\n    const id = list.length + 1\r\n    setList([ ...list, { id, title: '代办事项', list: [] } ].reverse())\r\n    setActive(id)\r\n    setMenuOp('new')\r\n  }\r\n\r\n  const menuClick = (event) => {\r\n    setActive(+event.target.dataset.id)\r\n  }\r\n\r\n  const activeItem = () => {\r\n    return list.find(item => item.id === active)\r\n  }\r\n\r\n  const titleChange = (event) => {\r\n    activeItem().title = event.target.value.trim()\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const submitTitle = (event) => {\r\n    if (event.keyCode === 13) {\r\n      const val = event.target.value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      setIsEditTitle(false)\r\n      activeItem().title = val\r\n      setList([ ...list ])\r\n    }\r\n  }\r\n\r\n  const delAll = () => {\r\n    let index\r\n    list.forEach((item, i) => {\r\n      if (item.id === activeItem().id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && list.splice(index, 1)\r\n\r\n    // 先完成动画，再渲染dom\r\n    menuRef.current.children[ 0 ].classList.add('leave')\r\n    window.setTimeout(() => {\r\n      setList([ ...list ])\r\n      setActive(list.length)\r\n    }, 400);\r\n  }\r\n\r\n  const submitItem = (event) => {\r\n    if (event.keyCode === 13) {\r\n      const val = event.target.value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      activeItem().list.reverse()\r\n      activeItem().list.push({ id: activeItem().list.length + 1, con: val, status: 'todo' })\r\n      activeItem().list.reverse()\r\n      setList([ ...list ])\r\n      event.target.value = ''\r\n    }\r\n  }\r\n\r\n  const changeStatus = (item) => {\r\n    const listItem = activeItem().list.find(obj => obj.id === item.id)\r\n    listItem.status = listItem.status === 'todo' ? 'done' : 'todo'\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const delItem = (item) => {\r\n    let index\r\n    activeItem().list.forEach((obj, i) => {\r\n      if (obj.id === item.id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && activeItem().list.splice(index, 1)\r\n    setList([ ...list ])\r\n  }\r\n\r\n  // 动画\r\n  useEffect(() => {\r\n    // 新增执行动画\r\n    if (menuOp === 'new') {\r\n      menuRef.current.children[ 0 ].classList.add('enter')\r\n    }\r\n    // 下次动画有效\r\n    return () => {\r\n      setMenuOp(null)\r\n    }\r\n  }, [ menuOp ])\r\n\r\n  // 缓存数据\r\n  useEffect(() => {\r\n    return () => {\r\n      window.localStorage.setItem('todos-hook-list', JSON.stringify(list))\r\n    }\r\n  }, [ list ])\r\n\r\n  return (\r\n      <div className=\"container\">\r\n          <aside className=\"menu\">\r\n              <p className=\"list-new\" onClick={ newMenu }>⊹ 新增</p>\r\n              <ul onClick={ menuClick } ref={ menuRef }>\r\n                  {list.map(item => (\r\n                      <li className={ [ 'ell', (item.id === active) ? 'active' : '' ].join(' ') } key={ item.id } data-id={ item.id } data-todos={ item.list.filter(obj => obj.status === 'todo').length }>{item.id}. {item.title}</li>\r\n          ))}\r\n              </ul>\r\n          </aside>\r\n          <section className=\"main\">\r\n              {activeItem() ? (\r\n                  <div className=\"header\">\r\n                      <div className={ [ 'title', isEditTitle ? 'non' : '' ].join(' ') }>\r\n                          <h3 onClick={ () => {setIsEditTitle(true)} }>\r\n                              <span>✎</span>\r\n                              <span className=\"ell\" data-todos={ activeItem().list.filter(obj => obj.status === 'todo').length }>{activeItem() && `${ activeItem().id }. ${ activeItem().title }`}</span>\r\n                          </h3>\r\n                          <span className=\"del-all\" onClick={ delAll }>ㄨ</span>\r\n                      </div>\r\n                      <div className={ [ 'title', isEditTitle ? '' : 'non' ].join(' ') }>\r\n                          <input type=\"text\" value={ activeItem() && activeItem().title } placeholder=\"请输入，回车确认\" onChange={ titleChange } onKeyUp={ submitTitle }/>\r\n                      </div>\r\n                      <p><span className=\"item-new\">✙</span><input type=\"text\" placeholder=\"请输入，回车确认\" onKeyUp={ submitItem } /></p>\r\n                  </div>\r\n        ): null}\r\n              <ul>\r\n                  {activeItem() && activeItem().list.map(((item) => (\r\n                      <li key={ item.id } className={ item.status }>\r\n                          <span onClick={ () => changeStatus(item) } className=\"op\">{item.status === 'todo' ? '☐' : '✓'}</span>\r\n                          <span className='con'>{item.id}. {item.con}</span>\r\n                          <span onClick={ () => delItem(item) } className=\"del-item\">ㄨ</span>\r\n                      </li>\r\n          )))}\r\n              </ul>\r\n          </section>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Todos","// import * as React from 'react'\r\n\r\n// export interface HelloProps {\r\n//   compiler: string;\r\n//   framework: String;\r\n// }\r\n\r\n// // export const Hello = (props: HelloProps) => <h1>Hello from {props.compiler} and {props.framework}</h1>\r\n\r\n// export class Hello extends React.Component<HelloProps, {}> {\r\n//   render () {\r\n//     return <h1>Hello from {this.props.compiler} and {this.props.framework}</h1>\r\n//   }\r\n//  }\r\n\r\n//  export default function () {\r\n//    return <Hello compiler=\"Typescript\" framework=\"react\"/>\r\n//  }\r\n\r\nimport * as React from 'react'\r\nimport '../TodosHook/Todos.css'\r\n\r\nconst { useState, useEffect, useRef } = React\r\n\r\nexport default function () {\r\n  let initList = [ { id: 1, title: '工作', list: [ { id: 1, con: '静态页面开发', status: 'todo' } ] } ]\r\n\r\n  // 重新初始化，设置数据\r\n  const TODOLIST = 'todos-hook-ts-list'\r\n  const lists = window.localStorage.getItem(TODOLIST)\r\n  if (lists) {\r\n    initList = JSON.parse(lists)\r\n  }\r\n\r\n  const [ list, setList ] = useState(initList)\r\n  const [ active, setActive ] = useState(list.length)\r\n  const [ isEditTitle, setIsEditTitle ] = useState(false)\r\n\r\n  const [ menuOp, setMenuOp ] = useState(null)\r\n\r\n  const menuRef = useRef(null)\r\n\r\n  const newMenu = () => {\r\n    list.reverse()\r\n    const id: number = list.length + 1\r\n    setList([ ...list, { id, title: '代办事项', list: [] } ].reverse())\r\n    setActive(id)\r\n    setMenuOp('new')\r\n  }\r\n\r\n  const menuClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setActive(+((event.target as HTMLElement).dataset.id))\r\n  }\r\n\r\n  const activeItem = () => {\r\n    return list.find(item => item.id === active)\r\n  }\r\n\r\n  const titleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    activeItem().title = (event.target as HTMLInputElement).value.trim()\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const submitTitle = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.keyCode === 13) {\r\n      const val: string = (event.target as HTMLInputElement).value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      setIsEditTitle(false)\r\n      activeItem().title = val\r\n      setList([ ...list ])\r\n    }\r\n  }\r\n\r\n  const delAll = () => {\r\n    let index: number\r\n    list.forEach((item, i) => {\r\n      if (item.id === activeItem().id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && list.splice(index, 1)\r\n\r\n    // 先完成动画，再渲染dom\r\n    menuRef.current.children[ 0 ].classList.add('leave')\r\n    window.setTimeout(() => {\r\n      setList([ ...list ])\r\n      setActive(list.length)\r\n    }, 400);\r\n  }\r\n\r\n  const submitItem = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.keyCode === 13) {\r\n      const target = event.target as HTMLInputElement\r\n      const val: string = target.value.trim()\r\n      if (!val) {\r\n        window.alert('不能为空')\r\n        return\r\n      }\r\n      activeItem().list.reverse()\r\n      activeItem().list.push({ id: activeItem().list.length + 1, con: val, status: 'todo' })\r\n      activeItem().list.reverse()\r\n      setList([ ...list ])\r\n      target.value = ''\r\n    }\r\n  }\r\n\r\n  type Item = {\r\n    id: string | number,\r\n    status: string\r\n  }\r\n\r\n  const changeStatus = (item: Item) => {\r\n    const listItem: Item = activeItem().list.find(obj => obj.id === item.id)\r\n    listItem.status = listItem.status === 'todo' ? 'done' : 'todo'\r\n    setList([ ...list ])\r\n  }\r\n\r\n  const delItem = (item: Item) => {\r\n    let index: number\r\n    activeItem().list.forEach((obj, i) => {\r\n      if (obj.id === item.id) {\r\n        index = i\r\n      }\r\n    })\r\n    ~index && activeItem().list.splice(index, 1)\r\n    setList([ ...list ])\r\n  }\r\n\r\n  // 动画\r\n  useEffect(() => {\r\n    // 新增执行动画\r\n    if (menuOp === 'new') {\r\n      menuRef.current.children[ 0 ].classList.add('enter')\r\n    }\r\n    // 下次动画有效\r\n    return () => {\r\n      setMenuOp(null)\r\n    }\r\n  }, [ menuOp ])\r\n\r\n  // 缓存数据\r\n  useEffect(() => {\r\n    return () => {\r\n      window.localStorage.setItem(TODOLIST, JSON.stringify(list))\r\n    }\r\n  }, [ list ])\r\n\r\n  return (\r\n      <div className=\"container\">\r\n          <aside className=\"menu\">\r\n              <p className=\"list-new\" onClick={ newMenu }>⊹ 新增</p>\r\n              <ul onClick={ menuClick } ref={ menuRef }>\r\n                  {list.map(item => (\r\n                      <li className={ [ 'ell', (item.id === active) ? 'active' : '' ].join(' ') } key={ item.id } data-id={ item.id } data-todos={ item.list.filter(obj => obj.status === 'todo').length }>{item.id}. {item.title}</li>\r\n          ))}\r\n              </ul>\r\n          </aside>\r\n          <section className=\"main\">\r\n              {activeItem() ? (\r\n                  <div className=\"header\">\r\n                      <div className={ [ 'title', isEditTitle ? 'non' : '' ].join(' ') }>\r\n                          <h3 onClick={ () => { setIsEditTitle(true) } }>\r\n                              <span>✎</span>\r\n                              <span className=\"ell\" data-todos={ activeItem().list.filter(obj => obj.status === 'todo').length }>{activeItem() && `${ activeItem().id }. ${ activeItem().title }`}</span>\r\n                          </h3>\r\n                          <span className=\"del-all\" onClick={ delAll }>ㄨ</span>\r\n                      </div>\r\n                      <div className={ [ 'title', isEditTitle ? '' : 'non' ].join(' ') }>\r\n                          <input type=\"text\" value={ activeItem() && activeItem().title } placeholder=\"请输入，回车确认\" onChange={ titleChange } onKeyUp={ submitTitle } />\r\n                      </div>\r\n                      <p><span className=\"item-new\">✙</span><input type=\"text\" placeholder=\"请输入，回车确认\" onKeyUp={ submitItem } /></p>\r\n                  </div>\r\n        ) : null}\r\n              <ul>\r\n                  {activeItem() && activeItem().list.map(((item) => (\r\n                      <li key={ item.id } className={ item.status }>\r\n                          <span onClick={ () => changeStatus(item) } className=\"op\">{item.status === 'todo' ? '☐' : '✓'}</span>\r\n                          <span className='con'>{item.id}. {item.con}</span>\r\n                          <span onClick={ () => delItem(item) } className=\"del-item\">ㄨ</span>\r\n                      </li>\r\n          )))}\r\n              </ul>\r\n          </section>\r\n      </div>\r\n  )\r\n}","import React from 'react';\r\nimport { HashRouter as Router, Route, Link } from 'react-router-dom'\r\nimport Todos from './pages/TodosHook/Todos.js'\r\nimport TsTodos from './pages/TsTodosHook/Todos.tsx'\r\n\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\n\r\nfunction Index () {\r\n  return (\r\n      <div className=\"App\">\r\n          <header className=\"App-header\">\r\n              <img src={ logo } className=\"App-logo\" alt=\"logo\" />\r\n              <p>\r\n            Edit <code>src/App.js</code> and save to reload.\r\n              </p>\r\n              <a\r\n            className=\"App-link\"\r\n            href=\"https://reactjs.org\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Learn React\r\n              </a>\r\n\r\n              <Link className=\"App-link\" to=\"/todos-hook\">todos-hook</Link>\r\n              <Link className=\"App-link\" to=\"/ts-todos-hook\">ts-todos-hook</Link>\r\n          </header>\r\n      </div>\r\n    )\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n      // <Router>\r\n      //     <Route path=\"/\" exact component={ Index } />\r\n      //     <Route path=\"/todos-hook\" component={ Todos } />\r\n      // </Router>\r\n      <Router>\r\n          <Route path=\"/\" exact component={ Index } />\r\n          <Route path=\"/todos-hook\" component={ Todos } />\r\n          <Route path=\"/ts-todos-hook\" component={ TsTodos }/>\r\n      </Router>\r\n      \r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// import './index.css';\r\n// import App from './App';\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\n// ReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}